<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Access Ride Partner App</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      margin: 0;
      padding: 0;
      background: #f5f7fa;
      color: #333;
    }
    
    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }
    
    header {
      background: linear-gradient(135deg, #3a7bd5, #00d2ff);
      color: white;
      padding: 40px 20px;
      text-align: center;
    }
    
    h1 {
      margin: 0;
      font-size: 2.5rem;
    }
    
    .subtitle {
      margin-top: 10px;
      font-size: 1.2rem;
      opacity: 0.9;
    }
    
    .card {
      background: white;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      padding: 25px;
      margin-bottom: 30px;
    }
    
    h2 {
      color: #3a7bd5;
      margin-top: 0;
    }
    
    .options {
      display: grid;
      grid-template-columns: 1fr;
      gap: 20px;
      margin-top: 30px;
    }
    
    @media (min-width: 640px) {
      .options {
        grid-template-columns: 1fr 1fr;
      }
    }
    
    .option-card {
      background: white;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      padding: 20px;
      display: flex;
      flex-direction: column;
    }
    
    .option-card h3 {
      margin-top: 0;
      color: #3a7bd5;
    }
    
    .option-card p {
      margin-bottom: 20px;
      flex-grow: 1;
    }
    
    .button {
      display: inline-block;
      background: #3a7bd5;
      color: white;
      text-decoration: none;
      padding: 12px 20px;
      border-radius: 8px;
      font-weight: bold;
      text-align: center;
      transition: transform 0.2s ease, background 0.2s ease;
    }
    
    .button:hover {
      transform: translateY(-2px);
      background: #2a6cc5;
    }
    
    .button.secondary {
      background: transparent;
      border: 2px solid #3a7bd5;
      color: #3a7bd5;
    }
    
    .button.secondary:hover {
      background: #f0f7ff;
    }
    
    .instructions {
      background: #f0f7ff;
      border-radius: 8px;
      padding: 20px;
      margin-top: 30px;
      border-left: 4px solid #3a7bd5;
    }
    
    .instructions h3 {
      margin-top: 0;
      color: #3a7bd5;
    }
    
    .instructions ul {
      padding-left: 20px;
    }
    
    .instructions li {
      margin-bottom: 10px;
    }
    
    .direct-link-box {
      background: #edf2f7;
      padding: 15px;
      border-radius: 8px;
      margin: 15px 0;
      font-family: monospace;
      word-break: break-all;
    }
    
    .copy-button {
      background: rgba(0, 0, 0, 0.1);
      border: none;
      padding: 5px 10px;
      border-radius: 4px;
      cursor: pointer;
      margin-left: 5px;
      font-size: 0.8rem;
    }
    
    footer {
      text-align: center;
      margin-top: 50px;
      padding: 20px;
      color: #666;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <header>
    <h1>Ride Partner</h1>
    <div class="subtitle">Access the application</div>
  </header>
  
  <div class="container">
    <div class="card">
      <h2>DNS Resolution Issues on Mobile?</h2>
      <p>We've noticed some users experience DNS resolution issues when trying to access the app on mobile devices. We've created several ways to connect to the application to solve this problem.</p>
      
      <div class="options">
        <div class="option-card">
          <h3>Direct IP Access</h3>
          <p>Use a direct IP connection to bypass DNS issues. This provides a simplified interface with core functionality.</p>
          <a href="/direct-ip" class="button">Access via IP</a>
        </div>
        
        <div class="option-card">
          <h3>QR Code Access</h3>
          <p>Scan a QR code with your mobile device to access the app via direct IP address.</p>
          <a href="/mobile-qr" class="button">Use QR Code</a>
        </div>
        
        <div class="option-card">
          <h3>Direct Route</h3>
          <p>Try our most direct route for connecting to the app. Simple but effective.</p>
          <a href="/direct" class="button">Direct Route</a>
        </div>
        
        <div class="option-card">
          <h3>Full Application</h3>
          <p>Access the complete application with all features (if your DNS resolution works correctly).</p>
          <a href="/" class="button secondary">Go to Full App</a>
        </div>
      </div>
      
      <div class="instructions">
        <h3>Manual Access Instructions</h3>
        <p>If none of the above options work, try these steps:</p>
        
        <ol>
          <li>Copy this direct link URL:</li>
        </ol>
        
        <div class="direct-link-box" id="direct-link">
          http://<span id="ip-display">0.0.0.0</span>:5000/direct-ip
          <button class="copy-button" id="copy-link">Copy</button>
        </div>
        
        <ol start="2">
          <li>Open your mobile browser and paste the URL</li>
          <li>Bookmark the page for easy access in the future</li>
          <li>If this doesn't work, try connecting to the same WiFi network as the computer running the application</li>
        </ol>
      </div>
    </div>
  </div>
  
  <footer>
    Ride Partner &copy; 2025
  </footer>
  
  <script>
    document.addEventListener('DOMContentLoaded', async function() {
      // Get connection info
      try {
        const response = await fetch('/api/connection-info');
        const data = await response.json();
        
        // Get the hostname or IP
        const host = window.location.hostname;
        const port = data.serverPort || window.location.port || '5000';
        
        // Update the direct link
        document.getElementById('ip-display').textContent = host;
        
        // Build the direct link
        const directLink = `http://${host}:${port}/direct-ip`;
        document.getElementById('direct-link').textContent = directLink;
        
        // Setup copy button
        document.getElementById('copy-link').addEventListener('click', function() {
          navigator.clipboard.writeText(directLink).then(function() {
            alert('Link copied to clipboard!');
          }).catch(function(err) {
            alert('Could not copy text. Please copy the link manually.');
          });
        });
      } catch (error) {
        console.error('Error fetching connection info:', error);
      }
    });
  </script>
</body>
</html>